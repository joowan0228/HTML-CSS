<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>회원가입</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"/>
<style>
  @import url('https://fastly.jsdelivr.net/npm/galmuri@latest/dist/galmuri.css');
  body {
    background-color: #fef6ff;
    font-family: 'Galmuri9', 'Noto Sans KR', sans-serif;
    transition: background-color 0.3s, color 0.3s;
    overflow: hidden;
  }
  body.dark-mode {
    background-color: #1e1e1e;
    color: #fff;
  }
  .signup-container {
    max-width: 500px;
    margin: 80px auto;
    background: white;
    padding: 30px;
    border-radius: 16px;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
    animation: fadeIn 0.4s ease-in-out;
  }
  body.dark-mode .signup-container {
    background: #2c2c2c;
  }
  h3 {
    color: #a66cff;
    text-align: center;
  }
  .form-control {
    border-radius: 10px;
    box-shadow: none;
  }
  .btn-primary {
    background-color: #ffc1cc;
    border: none;
    color: #333;
  }
  .btn-primary:hover {
    background-color: #ff99aa;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  @keyframes floatMove {
    0%   { transform: translate(0, 0) scale(1) rotate(0deg); }
    25%  { transform: translate(30px, -20px) scale(1.05) rotate(3deg); }
    50%  { transform: translate(-30px, 30px) scale(0.95) rotate(-2deg); }
    75%  { transform: translate(20px, 20px) scale(1.02) rotate(1deg); }
    100% { transform: translate(0, 0) scale(1) rotate(0deg); }
  }
  .moving-icon {
    position: fixed;
    pointer-events: none;
    z-index: -1;
    opacity: 0.5;
    width: 40px;
    animation: floatMove 10s linear infinite;
  }
</style>
</head>
<body>
<script>
(function(){
  const icons = [
    'https://static.wikia.nocookie.net/minecraft_gamepedia/images/a/ab/Diamond_JE3_BE3.png/revision/latest?cb=20230924193138',
    'https://minecraft.wiki/images/Iron_Pickaxe_JE3_BE2.png?8a6ea'
  ];
  const count = 30;
  for(let i = 0; i < count; i++){
    const el = document.createElement('img');
    el.src = icons[Math.floor(Math.random()*icons.length)];
    el.className = 'moving-icon';
    el.style.left = `${Math.random()*90}vw`;
    el.style.top = `${Math.random()*90}vh`;
    el.style.animationDelay = `-${Math.random()*10}s`;
    document.body.appendChild(el);
  }
})();
</script>

<div class="signup-container">
<h3><img alt="회원가입" src="https://static.wikia.nocookie.net/minecraft_gamepedia/images/5/53/Cake_JE4.png/revision/latest/scale-to-width/360?cb=20200518185831" style="height: 2.0em; vertical-align: middle;"/> 회원가입</h3>
<form action="welcome.html" class="mt-4" id="signupForm" method="GET">
  <div class="mb-3">
    <label class="form-label" for="username">아이디</label>
    <input class="form-control" id="username" minlength="4" name="username" placeholder="아이디 (4자 이상)" required type="text"/>
    <div class="form-text text-danger" id="usernameFeedback"></div>
  </div>
  <div class="mb-3">
    <label class="form-label" for="password">비밀번호</label>
    <input class="form-control" id="password" minlength="8" name="password" placeholder="영문+숫자+특수문자 포함, 8~30자" required type="password"/>
    <div class="form-text text-danger" id="passwordFeedback"></div>
  </div>
  <div class="mb-3">
    <label class="form-label" for="confirmPassword">비밀번호 확인</label>
    <input class="form-control" id="confirmPassword" name="confirmPassword" placeholder="비밀번호 재입력" required type="password"/>
    <div class="form-text text-danger" id="confirmPasswordFeedback"></div>
  </div>
  <div class="mb-3">
    <label class="form-label" for="name">이름</label>
    <input class="form-control" id="name" name="name" required type="text"/>
  </div>
  <div class="mb-3">
    <label class="form-label" for="phone">전화번호</label>
    <input class="form-control" id="phone" name="phone" required type="tel"/>
    <div class="form-text text-danger" id="phoneFeedback"></div>
  </div>
  <div class="mb-3">
    <label class="form-label">성별</label><br/>
    <div class="form-check form-check-inline">
      <input class="form-check-input" id="male" name="gender" required type="radio" value="남자"/>
      <label class="form-check-label" for="male">남자</label>
    </div>
    <div class="form-check form-check-inline">
      <input class="form-check-input" id="female" name="gender" type="radio" value="여자"/>
      <label class="form-check-label" for="female">여자</label>
    </div>
  </div>
  <div class="mb-3">
    <label class="form-label" for="email">이메일</label>
    <input class="form-control" id="email" name="email" placeholder="example@email.com" required type="email"/>
    <div class="form-text text-danger" id="emailFeedback"></div>
  </div>
  <button class="btn btn-primary w-100" type="submit"><img alt="회원가입 완료" src="https://static.wikia.nocookie.net/minecraft_gamepedia/images/b/b3/Compass_JE3_BE3.gif/revision/latest/thumbnail/width/360/height/450?cb=20201125191224" style="height: 2.0em; vertical-align: middle;"/> 회원가입 완료</button>
  <button class="btn btn-outline-dark w-100 mt-2" id="darkToggle" type="button"><img alt="다크모드" src="https://static.wikia.nocookie.net/minecraft_gamepedia/images/3/3e/Clock_JE3_BE3.gif/revision/latest/thumbnail/width/360/height/360?cb=20201125194053" style="height: 2.0em; vertical-align: middle;"/> 다크모드</button>
</form>
</div>

<script>
document.getElementById("signupForm").addEventListener("submit", function (e) {
  const id = document.getElementById("username").value.trim();
  const pw = document.getElementById("password").value;
  const pw2 = document.getElementById("confirmPassword").value;
  const email = document.getElementById("email").value;
  const name = document.getElementById("name").value;
  const phone = document.getElementById("phone").value;
  const gender = document.querySelector('input[name="gender"]:checked');

  const idValid = /^[a-zA-Z0-9]{4,}$/;
  const pwValid = /^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,30}$/;
  const phoneValid = /^\d{9,11}$/;

  if (!id || !pw || !pw2 || !name || !phone || !gender || !email.includes("@")) {
    e.preventDefault();
    alert("❌ 모든 항목을 입력해주세요.");
    return;
  }
  if (!idValid.test(id)) {
    e.preventDefault();
    alert("❌ 아이디는 영문과 숫자만 가능하며 4자 이상이어야 합니다.");
    return;
  }
  if (!pwValid.test(pw)) {
    e.preventDefault();
    alert("❌ 비밀번호는 영문, 숫자, 특수문자를 포함한 8~30자여야 합니다.");
    return;
  }
  if (pw !== pw2) {
    e.preventDefault();
    alert("❌ 비밀번호가 일치하지 않습니다.");
    return;
  }
  if (!phoneValid.test(phone)) {
    e.preventDefault();
    alert("❌ 전화번호는 숫자만 포함하며 9~11자리여야 합니다.");
    return;
  }
});

document.getElementById("darkToggle").addEventListener("click", () => {
  document.body.classList.toggle("dark-mode");
});

const usernameInput = document.getElementById("username");
const passwordInput = document.getElementById("password");
const confirmPasswordInput = document.getElementById("confirmPassword");
const emailInput = document.getElementById("email");
const phoneInput = document.getElementById("phone");

usernameInput.addEventListener("input", () => {
  const feedback = document.getElementById("usernameFeedback");
  const idValid = /^[a-zA-Z0-9]{4,}$/;
  feedback.textContent = !idValid.test(usernameInput.value)
    ? "❌ 아이디는 영문과 숫자만 가능하며 4자 이상이어야 합니다."
    : "";
});

passwordInput.addEventListener("input", () => {
  const feedback = document.getElementById("passwordFeedback");
  const pwValid = /^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^&*]).{8,30}$/;
  feedback.textContent = !pwValid.test(passwordInput.value)
    ? "❌ 비밀번호 형식이 올바르지 않습니다."
    : "";
});

confirmPasswordInput.addEventListener("input", () => {
  const feedback = document.getElementById("confirmPasswordFeedback");
  if (confirmPasswordInput.value === "") {
    feedback.textContent = "";
  } else if (confirmPasswordInput.value !== passwordInput.value) {
    feedback.textContent = "❌ 비밀번호가 일치하지 않습니다.";
    feedback.classList.remove("text-success");
    feedback.classList.add("text-danger");
  } else {
    feedback.textContent = "✅ 비밀번호가 일치합니다.";
    feedback.classList.remove("text-danger");
    feedback.classList.add("text-success");
  }
});

emailInput.addEventListener("input", () => {
  const feedback = document.getElementById("emailFeedback");
  feedback.textContent = !emailInput.value.includes("@")
    ? "❌ 이메일 형식이 올바르지 않습니다."
    : "";
});

phoneInput.addEventListener("input", () => {
  const feedback = document.getElementById("phoneFeedback");
  const phoneValid = /^\d{9,11}$/;
  feedback.textContent = !phoneValid.test(phoneInput.value)
    ? "❌ 전화번호는 숫자 9~11자리여야 합니다."
    : "";
});
</script>
</body>
</html>
